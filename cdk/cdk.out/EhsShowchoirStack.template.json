{
 "Description": "EHS Show Choir Payment System - Main Infrastructure",
 "Resources": {
  "WebsiteBucket75C24D94": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketName": "ehsshowchoir-website-636865837466-us-east-2",
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "DeleteOldVersions",
       "NoncurrentVersionExpiration": {
        "NoncurrentDays": 30
       },
       "Status": "Enabled"
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/WebsiteBucket/Resource"
   }
  },
  "WebsiteBucketPolicyE10E3262": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "WebsiteBucket75C24D94"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:PutBucketPolicy"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "WebsiteBucket75C24D94",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "WebsiteBucket75C24D94",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Principal": {
        "CanonicalUser": {
         "Fn::GetAtt": [
          "OAIE1EFC67F",
          "S3CanonicalUserId"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "WebsiteBucket75C24D94",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "WebsiteBucket75C24D94",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Principal": {
        "CanonicalUser": {
         "Fn::GetAtt": [
          "OAIE1EFC67F",
          "S3CanonicalUserId"
         ]
        }
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "WebsiteBucket75C24D94",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/WebsiteBucket/Policy/Resource"
   }
  },
  "WebsiteBucketAutoDeleteObjectsCustomResource8750E461": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "WebsiteBucket75C24D94"
    }
   },
   "DependsOn": [
    "WebsiteBucketPolicyE10E3262"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/WebsiteBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-636865837466-us-east-2",
     "S3Key": "faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Description": {
     "Fn::Join": [
      "",
      [
       "Lambda function for auto-deleting objects in ",
       {
        "Ref": "WebsiteBucket75C24D94"
       },
       " S3 bucket."
      ]
     ]
    }
   },
   "DependsOn": [
    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092"
   ],
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler",
    "aws:asset:path": "asset.faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6",
    "aws:asset:property": "Code"
   }
  },
  "InvoicesBucket57FCB164": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketName": "ehsshowchoir-invoices-636865837466-us-east-2",
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "ArchiveOldInvoices",
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "STANDARD_IA",
         "TransitionInDays": 90
        },
        {
         "StorageClass": "GLACIER",
         "TransitionInDays": 365
        }
       ]
      },
      {
       "ExpirationInDays": 2555,
       "Id": "DeleteVeryOldInvoices",
       "Status": "Enabled"
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/InvoicesBucket/Resource"
   }
  },
  "StudentsTableDAB56938": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "parentEmail",
      "AttributeType": "S"
     },
     {
      "AttributeName": "status",
      "AttributeType": "S"
     },
     {
      "AttributeName": "createdAt",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "ParentEmailIndex",
      "KeySchema": [
       {
        "AttributeName": "parentEmail",
        "KeyType": "HASH"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "StatusIndex",
      "KeySchema": [
       {
        "AttributeName": "status",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "createdAt",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "id",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "StreamSpecification": {
     "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TableName": "ehsshowchoir-students"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/StudentsTable/Resource"
   }
  },
  "PaymentHistoryTableB1149501": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "transaction_date",
      "AttributeType": "S"
     },
     {
      "AttributeName": "student_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "parent_email",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "StudentIdIndex",
      "KeySchema": [
       {
        "AttributeName": "student_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "transaction_date",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "ParentEmailIndex",
      "KeySchema": [
       {
        "AttributeName": "parent_email",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "transaction_date",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "transaction_date",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "StreamSpecification": {
     "StreamViewType": "NEW_AND_OLD_IMAGES"
    },
    "TableName": "ehsshowchoir-payment-history"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/PaymentHistoryTable/Resource"
   }
  },
  "InvoiceLogTable6D0E71B2": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "created_at",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "created_at",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "ehsshowchoir-invoice-log",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/InvoiceLogTable/Resource"
   }
  },
  "ParentStudentTable1F3E1FD1": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "parent_email",
      "AttributeType": "S"
     },
     {
      "AttributeName": "student_id",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "parent_email",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "student_id",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "ehsshowchoir-parent-student-relationships"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/ParentStudentTable/Resource"
   }
  },
  "UserPool6BA7E5F2": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false,
     "InviteMessageTemplate": {
      "EmailMessage": "Hello {username}, your temporary password is {####}",
      "EmailSubject": "Welcome to Edgewood Show Choir Payment Portal"
     }
    },
    "AutoVerifiedAttributes": [
     "email"
    ],
    "EmailVerificationMessage": "Your verification code is {####}",
    "EmailVerificationSubject": "Verify your email for Edgewood Show Choir",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 8,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": true,
      "RequireUppercase": true
     }
    },
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolName": "ehsshowchoir-users",
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "Your verification code is {####}",
     "EmailSubject": "Verify your email for Edgewood Show Choir",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/UserPool/Resource"
   }
  },
  "UserPoolCognitoDomainD6C7F9FA": {
   "Type": "AWS::Cognito::UserPoolDomain",
   "Properties": {
    "Domain": "ehsshowchoir-auth",
    "UserPoolId": {
     "Ref": "UserPool6BA7E5F2"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/UserPool/CognitoDomain/Resource"
   }
  },
  "UserPoolClient2F5918F7": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AllowedOAuthFlows": [
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "email",
     "openid",
     "profile"
    ],
    "CallbackURLs": [
     "https://edgewoodshowchoirpayments.org/auth/callback",
     "https://edgewoodshowchoirpayments.org/",
     "http://localhost:3000/auth/callback",
     "http://localhost:3000/"
    ],
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_ADMIN_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "LogoutURLs": [
     "https://edgewoodshowchoirpayments.org/auth/logout",
     "https://edgewoodshowchoirpayments.org/",
     "http://localhost:3000/auth/logout",
     "http://localhost:3000/"
    ],
    "ReadAttributes": [
     "email",
     "email_verified",
     "family_name",
     "given_name"
    ],
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "UserPoolId": {
     "Ref": "UserPool6BA7E5F2"
    },
    "WriteAttributes": [
     "email",
     "family_name",
     "given_name"
    ]
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/UserPoolClient/Resource"
   }
  },
  "LambdaRole3A44B857": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "dynamodb:BatchGetItem",
          "dynamodb:BatchWriteItem",
          "dynamodb:DeleteItem",
          "dynamodb:GetItem",
          "dynamodb:PutItem",
          "dynamodb:Query",
          "dynamodb:Scan",
          "dynamodb:UpdateItem"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::GetAtt": [
            "InvoiceLogTable6D0E71B2",
            "Arn"
           ]
          },
          {
           "Fn::GetAtt": [
            "ParentStudentTable1F3E1FD1",
            "Arn"
           ]
          },
          {
           "Fn::GetAtt": [
            "PaymentHistoryTableB1149501",
            "Arn"
           ]
          },
          {
           "Fn::GetAtt": [
            "StudentsTableDAB56938",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "PaymentHistoryTableB1149501",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "StudentsTableDAB56938",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          }
         ]
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "DynamoDBAccess"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "s3:DeleteObject",
          "s3:GetObject",
          "s3:GetSignedUrl",
          "s3:PutObject"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            {
             "Fn::GetAtt": [
              "InvoicesBucket57FCB164",
              "Arn"
             ]
            },
            "/*"
           ]
          ]
         }
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "S3Access"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "ses:SendBulkTemplatedEmail",
          "ses:SendEmail",
          "ses:SendRawEmail"
         ],
         "Effect": "Allow",
         "Resource": "*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "SESAccess"
     },
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "cognito-idp:AdminAddUserToGroup",
          "cognito-idp:AdminGetUser",
          "cognito-idp:AdminListGroupsForUser",
          "cognito-idp:AdminRemoveUserFromGroup"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "UserPool6BA7E5F2",
           "Arn"
          ]
         }
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "CognitoAccess"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/LambdaRole/Resource"
   }
  },
  "ApiHandler5E7490E8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-636865837466-us-east-2",
     "S3Key": "b4b3d5272187ddeb70283e6ecf10396ff94b19d337a55bf78af3757743b96d5d.zip"
    },
    "Description": "Main API handler for EHS Show Choir",
    "Environment": {
     "Variables": {
      "STUDENTS_TABLE": {
       "Ref": "StudentsTableDAB56938"
      },
      "PAYMENT_HISTORY_TABLE": {
       "Ref": "PaymentHistoryTableB1149501"
      },
      "INVOICE_LOG_TABLE": {
       "Ref": "InvoiceLogTable6D0E71B2"
      },
      "PARENT_STUDENT_TABLE": {
       "Ref": "ParentStudentTable1F3E1FD1"
      },
      "INVOICES_BUCKET": {
       "Ref": "InvoicesBucket57FCB164"
      },
      "USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "FROM_EMAIL": "treasurer@edgewoodshowchoirpayments.org",
      "DOMAIN_NAME": "edgewoodshowchoirpayments.org",
      "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1"
     }
    },
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "LambdaRole3A44B857",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 30
   },
   "DependsOn": [
    "LambdaRole3A44B857"
   ],
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/ApiHandler/Resource",
    "aws:asset:path": "asset.b4b3d5272187ddeb70283e6ecf10396ff94b19d337a55bf78af3757743b96d5d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ApiHandlerLogRetention907E318F": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "ApiHandler5E7490E8"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/ApiHandler/LogRetention/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:DeleteRetentionPolicy",
        "logs:PutRetentionPolicy"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "Roles": [
     {
      "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Handler": "index.handler",
    "Runtime": "nodejs22.x",
    "Timeout": 900,
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-636865837466-us-east-2",
     "S3Key": "2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d.zip"
    },
    "Role": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"
   ],
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource",
    "aws:asset:path": "asset.2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "BulkInvoiceHandler55959176": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-636865837466-us-east-2",
     "S3Key": "b4b3d5272187ddeb70283e6ecf10396ff94b19d337a55bf78af3757743b96d5d.zip"
    },
    "Description": "Bulk invoice processing for EHS Show Choir",
    "Environment": {
     "Variables": {
      "STUDENTS_TABLE": {
       "Ref": "StudentsTableDAB56938"
      },
      "PAYMENT_HISTORY_TABLE": {
       "Ref": "PaymentHistoryTableB1149501"
      },
      "INVOICE_LOG_TABLE": {
       "Ref": "InvoiceLogTable6D0E71B2"
      },
      "PARENT_STUDENT_TABLE": {
       "Ref": "ParentStudentTable1F3E1FD1"
      },
      "INVOICES_BUCKET": {
       "Ref": "InvoicesBucket57FCB164"
      },
      "FROM_EMAIL": "treasurer@edgewoodshowchoirpayments.org",
      "DOMAIN_NAME": "edgewoodshowchoirpayments.org",
      "AWS_NODEJS_CONNECTION_REUSE_ENABLED": "1"
     }
    },
    "Handler": "bulk-invoice-handler.bulkInvoiceHandler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "LambdaRole3A44B857",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Timeout": 900
   },
   "DependsOn": [
    "LambdaRole3A44B857"
   ],
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/BulkInvoiceHandler/Resource",
    "aws:asset:path": "asset.b4b3d5272187ddeb70283e6ecf10396ff94b19d337a55bf78af3757743b96d5d",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "BulkInvoiceHandlerLogRetentionC79A65BE": {
   "Type": "Custom::LogRetention",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
      "Arn"
     ]
    },
    "LogGroupName": {
     "Fn::Join": [
      "",
      [
       "/aws/lambda/",
       {
        "Ref": "BulkInvoiceHandler55959176"
       }
      ]
     ]
    },
    "RetentionInDays": 30
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/BulkInvoiceHandler/LogRetention/Resource"
   }
  },
  "ApiF70053CD": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "EHS Show Choir Payment System API",
    "Name": "ehsshowchoir-api"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Resource"
   }
  },
  "ApiDeploymentB17BE62D87509517dab5fe5f373a418bfc97561c": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "EHS Show Choir Payment System API",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "DependsOn": [
    "ApihealthGET8A9DC1E4",
    "ApihealthOPTIONS119B6E46",
    "Apihealth5CB7A415",
    "ApiinvoicesbulksendOPTIONS64E26DC8",
    "ApiinvoicesbulksendPOSTBB30D550",
    "ApiinvoicesbulksendA1FBBE63",
    "ApiinvoicesgenerateindividualOPTIONS0C82BEB7",
    "ApiinvoicesgenerateindividualPOSTCB952379",
    "Apiinvoicesgenerateindividual84E422D5",
    "ApiinvoicesOPTIONS7831A8EF",
    "ApiinvoicesAD9AA2E2",
    "ApiOPTIONS5886EA5D",
    "ApipaymenthistoryGET1A372C7E",
    "ApipaymenthistoryOPTIONS873861F5",
    "ApipaymenthistoryPOST9A17E45A",
    "Apipaymenthistory370FB0AD",
    "ApistudentsstudentIdDELETE51D1B7FB",
    "ApistudentsstudentIdGET4602FEEF",
    "ApistudentsstudentIdinvoicedataGETB39AF273",
    "ApistudentsstudentIdinvoicedataOPTIONSF659A2B7",
    "ApistudentsstudentIdinvoicedataE970C213",
    "ApistudentsstudentIdOPTIONS8E5D4962",
    "ApistudentsstudentIdpaymenthistoryGET1E314884",
    "ApistudentsstudentIdpaymenthistoryOPTIONS39E6FB6E",
    "ApistudentsstudentIdpaymenthistoryE7DAFFCF",
    "ApistudentsstudentIdPUTA7105621",
    "ApistudentsstudentIdE5FA2788",
    "ApistudentsGETDB1069D5",
    "ApistudentsOPTIONS69F92219",
    "ApistudentsPOST89E958F6",
    "ApistudentsD99697EF"
   ],
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "ApiDeploymentStageprod3EB9684E": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "ApiDeploymentB17BE62D87509517dab5fe5f373a418bfc97561c"
    },
    "MethodSettings": [
     {
      "DataTraceEnabled": true,
      "HttpMethod": "*",
      "LoggingLevel": "INFO",
      "ResourcePath": "/*"
     }
    ],
    "RestApiId": {
     "Ref": "ApiF70053CD"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/DeploymentStage.prod/Resource"
   }
  },
  "ApiOPTIONS5886EA5D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "ApiF70053CD",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/OPTIONS/Resource"
   }
  },
  "Apihealth5CB7A415": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ApiF70053CD",
      "RootResourceId"
     ]
    },
    "PathPart": "health",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/health/Resource"
   }
  },
  "ApihealthOPTIONS119B6E46": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "Apihealth5CB7A415"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/health/OPTIONS/Resource"
   }
  },
  "ApihealthGETApiPermissionEhsShowchoirStackApi62088C04GEThealthE24F6EFC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/health"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/health/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..health"
   }
  },
  "ApihealthGETApiPermissionTestEhsShowchoirStackApi62088C04GEThealthE68716BE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/health"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/health/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..health"
   }
  },
  "ApihealthGET8A9DC1E4": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "Apihealth5CB7A415"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/health/GET/Resource"
   }
  },
  "ApistudentsD99697EF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ApiF70053CD",
      "RootResourceId"
     ]
    },
    "PathPart": "students",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/Resource"
   }
  },
  "ApistudentsOPTIONS69F92219": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApistudentsD99697EF"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/OPTIONS/Resource"
   }
  },
  "ApistudentsGETApiPermissionEhsShowchoirStackApi62088C04GETstudentsAC4919CC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/students"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..students"
   }
  },
  "ApistudentsGETApiPermissionTestEhsShowchoirStackApi62088C04GETstudents7E065D51": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/students"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..students"
   }
  },
  "ApistudentsGETDB1069D5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsD99697EF"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/GET/Resource"
   }
  },
  "ApistudentsPOSTApiPermissionEhsShowchoirStackApi62088C04POSTstudentsB2569F5C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/POST/students"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/POST/ApiPermission.EhsShowchoirStackApi62088C04.POST..students"
   }
  },
  "ApistudentsPOSTApiPermissionTestEhsShowchoirStackApi62088C04POSTstudentsC785ED35": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/POST/students"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/POST/ApiPermission.Test.EhsShowchoirStackApi62088C04.POST..students"
   }
  },
  "ApistudentsPOST89E958F6": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsD99697EF"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/POST/Resource"
   }
  },
  "ApistudentsstudentIdE5FA2788": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApistudentsD99697EF"
    },
    "PathPart": "{studentId}",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/Resource"
   }
  },
  "ApistudentsstudentIdOPTIONS8E5D4962": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/OPTIONS/Resource"
   }
  },
  "ApistudentsstudentIdGETApiPermissionEhsShowchoirStackApi62088C04GETstudentsstudentIdAD9D2111": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..students.{studentId}"
   }
  },
  "ApistudentsstudentIdGETApiPermissionTestEhsShowchoirStackApi62088C04GETstudentsstudentId9DA2390C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..students.{studentId}"
   }
  },
  "ApistudentsstudentIdGET4602FEEF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/GET/Resource"
   }
  },
  "ApistudentsstudentIdPUTApiPermissionEhsShowchoirStackApi62088C04PUTstudentsstudentIdE1A08E0E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/PUT/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/PUT/ApiPermission.EhsShowchoirStackApi62088C04.PUT..students.{studentId}"
   }
  },
  "ApistudentsstudentIdPUTApiPermissionTestEhsShowchoirStackApi62088C04PUTstudentsstudentIdA8755150": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/PUT/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/PUT/ApiPermission.Test.EhsShowchoirStackApi62088C04.PUT..students.{studentId}"
   }
  },
  "ApistudentsstudentIdPUTA7105621": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/PUT/Resource"
   }
  },
  "ApistudentsstudentIdDELETEApiPermissionEhsShowchoirStackApi62088C04DELETEstudentsstudentIdAE8985FE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/DELETE/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/DELETE/ApiPermission.EhsShowchoirStackApi62088C04.DELETE..students.{studentId}"
   }
  },
  "ApistudentsstudentIdDELETEApiPermissionTestEhsShowchoirStackApi62088C04DELETEstudentsstudentId0F7D261B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/DELETE/students/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/DELETE/ApiPermission.Test.EhsShowchoirStackApi62088C04.DELETE..students.{studentId}"
   }
  },
  "ApistudentsstudentIdDELETE51D1B7FB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/DELETE/Resource"
   }
  },
  "ApistudentsstudentIdinvoicedataE970C213": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "PathPart": "invoice-data",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/invoice-data/Resource"
   }
  },
  "ApistudentsstudentIdinvoicedataOPTIONSF659A2B7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApistudentsstudentIdinvoicedataE970C213"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/invoice-data/OPTIONS/Resource"
   }
  },
  "ApistudentsstudentIdinvoicedataGETApiPermissionEhsShowchoirStackApi62088C04GETstudentsstudentIdinvoicedataB0313FD0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/students/*/invoice-data"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/invoice-data/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..students.{studentId}.invoice-data"
   }
  },
  "ApistudentsstudentIdinvoicedataGETApiPermissionTestEhsShowchoirStackApi62088C04GETstudentsstudentIdinvoicedata6959D134": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/students/*/invoice-data"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/invoice-data/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..students.{studentId}.invoice-data"
   }
  },
  "ApistudentsstudentIdinvoicedataGETB39AF273": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsstudentIdinvoicedataE970C213"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/invoice-data/GET/Resource"
   }
  },
  "ApistudentsstudentIdpaymenthistoryE7DAFFCF": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApistudentsstudentIdE5FA2788"
    },
    "PathPart": "payment-history",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/payment-history/Resource"
   }
  },
  "ApistudentsstudentIdpaymenthistoryOPTIONS39E6FB6E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApistudentsstudentIdpaymenthistoryE7DAFFCF"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/payment-history/OPTIONS/Resource"
   }
  },
  "ApistudentsstudentIdpaymenthistoryGETApiPermissionEhsShowchoirStackApi62088C04GETstudentsstudentIdpaymenthistory1A3C0796": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/students/*/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/payment-history/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..students.{studentId}.payment-history"
   }
  },
  "ApistudentsstudentIdpaymenthistoryGETApiPermissionTestEhsShowchoirStackApi62088C04GETstudentsstudentIdpaymenthistoryD5EDA9F4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/students/*/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/payment-history/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..students.{studentId}.payment-history"
   }
  },
  "ApistudentsstudentIdpaymenthistoryGET1E314884": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApistudentsstudentIdpaymenthistoryE7DAFFCF"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/students/{studentId}/payment-history/GET/Resource"
   }
  },
  "ApiinvoicesAD9AA2E2": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ApiF70053CD",
      "RootResourceId"
     ]
    },
    "PathPart": "invoices",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/Resource"
   }
  },
  "ApiinvoicesOPTIONS7831A8EF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiinvoicesAD9AA2E2"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/OPTIONS/Resource"
   }
  },
  "ApiinvoicesbulksendA1FBBE63": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiinvoicesAD9AA2E2"
    },
    "PathPart": "bulk-send",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/bulk-send/Resource"
   }
  },
  "ApiinvoicesbulksendOPTIONS64E26DC8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ApiinvoicesbulksendA1FBBE63"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/bulk-send/OPTIONS/Resource"
   }
  },
  "ApiinvoicesbulksendPOSTApiPermissionEhsShowchoirStackApi62088C04POSTinvoicesbulksend29F33F55": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "BulkInvoiceHandler55959176",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/POST/invoices/bulk-send"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/bulk-send/POST/ApiPermission.EhsShowchoirStackApi62088C04.POST..invoices.bulk-send"
   }
  },
  "ApiinvoicesbulksendPOSTApiPermissionTestEhsShowchoirStackApi62088C04POSTinvoicesbulksend03173BC7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "BulkInvoiceHandler55959176",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/POST/invoices/bulk-send"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/bulk-send/POST/ApiPermission.Test.EhsShowchoirStackApi62088C04.POST..invoices.bulk-send"
   }
  },
  "ApiinvoicesbulksendPOSTBB30D550": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "BulkInvoiceHandler55959176",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ApiinvoicesbulksendA1FBBE63"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/bulk-send/POST/Resource"
   }
  },
  "Apiinvoicesgenerateindividual84E422D5": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ApiinvoicesAD9AA2E2"
    },
    "PathPart": "generate-individual",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/generate-individual/Resource"
   }
  },
  "ApiinvoicesgenerateindividualOPTIONS0C82BEB7": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "Apiinvoicesgenerateindividual84E422D5"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/generate-individual/OPTIONS/Resource"
   }
  },
  "ApiinvoicesgenerateindividualPOSTApiPermissionEhsShowchoirStackApi62088C04POSTinvoicesgenerateindividual51EC28D8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/POST/invoices/generate-individual"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/generate-individual/POST/ApiPermission.EhsShowchoirStackApi62088C04.POST..invoices.generate-individual"
   }
  },
  "ApiinvoicesgenerateindividualPOSTApiPermissionTestEhsShowchoirStackApi62088C04POSTinvoicesgenerateindividualD743E446": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/POST/invoices/generate-individual"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/generate-individual/POST/ApiPermission.Test.EhsShowchoirStackApi62088C04.POST..invoices.generate-individual"
   }
  },
  "ApiinvoicesgenerateindividualPOSTCB952379": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "Apiinvoicesgenerateindividual84E422D5"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/invoices/generate-individual/POST/Resource"
   }
  },
  "Apipaymenthistory370FB0AD": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ApiF70053CD",
      "RootResourceId"
     ]
    },
    "PathPart": "payment-history",
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/Resource"
   }
  },
  "ApipaymenthistoryOPTIONS873861F5": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'",
        "method.response.header.Access-Control-Allow-Origin": "'https://edgewoodshowchoirpayments.org'",
        "method.response.header.Vary": "'Origin'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'",
        "method.response.header.Access-Control-Allow-Credentials": "'true'"
       },
       "ResponseTemplates": {
        "application/json": "#set($origin = $input.params().header.get(\"Origin\"))\n#if($origin == \"\")\n  #set($origin = $input.params().header.get(\"origin\"))\n#end\n#if($origin == \"https://www.edgewoodshowchoirpayments.org\" || $origin == \"http://localhost:3000\" || $origin == \"http://localhost:5173\")\n  #set($context.responseOverride.header.Access-Control-Allow-Origin = $origin)\n#end"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Vary": true,
       "method.response.header.Access-Control-Allow-Methods": true,
       "method.response.header.Access-Control-Allow-Credentials": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "Apipaymenthistory370FB0AD"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/OPTIONS/Resource"
   }
  },
  "ApipaymenthistoryGETApiPermissionEhsShowchoirStackApi62088C04GETpaymenthistoryE4B045C7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/GET/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/GET/ApiPermission.EhsShowchoirStackApi62088C04.GET..payment-history"
   }
  },
  "ApipaymenthistoryGETApiPermissionTestEhsShowchoirStackApi62088C04GETpaymenthistory5B720F8B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/GET/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/GET/ApiPermission.Test.EhsShowchoirStackApi62088C04.GET..payment-history"
   }
  },
  "ApipaymenthistoryGET1A372C7E": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "Apipaymenthistory370FB0AD"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/GET/Resource"
   }
  },
  "ApipaymenthistoryPOSTApiPermissionEhsShowchoirStackApi62088C04POSTpaymenthistory8F87C742": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/",
       {
        "Ref": "ApiDeploymentStageprod3EB9684E"
       },
       "/POST/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/POST/ApiPermission.EhsShowchoirStackApi62088C04.POST..payment-history"
   }
  },
  "ApipaymenthistoryPOSTApiPermissionTestEhsShowchoirStackApi62088C04POSTpaymenthistory56735873": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ApiHandler5E7490E8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-east-2:636865837466:",
       {
        "Ref": "ApiF70053CD"
       },
       "/test-invoke-stage/POST/payment-history"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/POST/ApiPermission.Test.EhsShowchoirStackApi62088C04.POST..payment-history"
   }
  },
  "ApipaymenthistoryPOST9A17E45A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AuthorizerBD825682"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "RequestTemplates": {
      "application/json": "{ \"statusCode\": \"200\" }"
     },
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ApiHandler5E7490E8",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "Apipaymenthistory370FB0AD"
    },
    "RestApiId": {
     "Ref": "ApiF70053CD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Api/Default/payment-history/POST/Resource"
   }
  },
  "AuthorizerBD825682": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "IdentitySource": "method.request.header.Authorization",
    "Name": "EhsShowchoirStackAuthorizerBB627581",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "ApiF70053CD"
    },
    "Type": "COGNITO_USER_POOLS"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Authorizer/Resource"
   }
  },
  "Certificate4E7ABB08": {
   "Type": "AWS::CertificateManager::Certificate",
   "Properties": {
    "DomainName": "edgewoodshowchoirpayments.org",
    "SubjectAlternativeNames": [
     "www.edgewoodshowchoirpayments.org"
    ],
    "Tags": [
     {
      "Key": "Name",
      "Value": "EhsShowchoirStack/Certificate"
     }
    ],
    "ValidationMethod": "DNS"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Certificate/Resource"
   }
  },
  "OAIE1EFC67F": {
   "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
   "Properties": {
    "CloudFrontOriginAccessIdentityConfig": {
     "Comment": "OAI for edgewoodshowchoirpayments.org"
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/OAI/Resource"
   }
  },
  "Distribution830FAC52": {
   "Type": "AWS::CloudFront::Distribution",
   "Properties": {
    "DistributionConfig": {
     "Aliases": [
      "edgewoodshowchoirpayments.org",
      "www.edgewoodshowchoirpayments.org"
     ],
     "CacheBehaviors": [
      {
       "AllowedMethods": [
        "GET",
        "HEAD",
        "OPTIONS",
        "PUT",
        "PATCH",
        "POST",
        "DELETE"
       ],
       "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a84be39ad",
       "Compress": true,
       "OriginRequestPolicyId": "88a5eaf4-2fd4-4709-b370-b4c650ea3fcf",
       "PathPattern": "/api/*",
       "TargetOriginId": "EhsShowchoirStackDistributionOrigin288966B75",
       "ViewerProtocolPolicy": "redirect-to-https"
      }
     ],
     "Comment": "EHS Show Choir Payment System Distribution",
     "CustomErrorResponses": [
      {
       "ErrorCachingMinTTL": 300,
       "ErrorCode": 404,
       "ResponseCode": 200,
       "ResponsePagePath": "/index.html"
      },
      {
       "ErrorCachingMinTTL": 300,
       "ErrorCode": 403,
       "ResponseCode": 200,
       "ResponsePagePath": "/index.html"
      }
     ],
     "DefaultCacheBehavior": {
      "AllowedMethods": [
       "GET",
       "HEAD",
       "OPTIONS"
      ],
      "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
      "Compress": true,
      "ResponseHeadersPolicyId": "67f7725c-6f97-4210-82d7-5512b31e9d03",
      "TargetOriginId": "EhsShowchoirStackDistributionOrigin1EE09CE1D",
      "ViewerProtocolPolicy": "redirect-to-https"
     },
     "DefaultRootObject": "index.html",
     "Enabled": true,
     "HttpVersion": "http2",
     "IPV6Enabled": true,
     "Origins": [
      {
       "DomainName": {
        "Fn::GetAtt": [
         "WebsiteBucket75C24D94",
         "RegionalDomainName"
        ]
       },
       "Id": "EhsShowchoirStackDistributionOrigin1EE09CE1D",
       "S3OriginConfig": {
        "OriginAccessIdentity": {
         "Fn::Join": [
          "",
          [
           "origin-access-identity/cloudfront/",
           {
            "Ref": "OAIE1EFC67F"
           }
          ]
         ]
        }
       }
      },
      {
       "CustomOriginConfig": {
        "OriginProtocolPolicy": "https-only",
        "OriginSSLProtocols": [
         "TLSv1.2"
        ]
       },
       "DomainName": {
        "Fn::Select": [
         2,
         {
          "Fn::Split": [
           "/",
           {
            "Fn::Join": [
             "",
             [
              "https://",
              {
               "Ref": "ApiF70053CD"
              },
              ".execute-api.us-east-2.",
              {
               "Ref": "AWS::URLSuffix"
              },
              "/",
              {
               "Ref": "ApiDeploymentStageprod3EB9684E"
              },
              "/"
             ]
            ]
           }
          ]
         }
        ]
       },
       "Id": "EhsShowchoirStackDistributionOrigin288966B75",
       "OriginPath": {
        "Fn::Join": [
         "",
         [
          "/",
          {
           "Fn::Select": [
            3,
            {
             "Fn::Split": [
              "/",
              {
               "Fn::Join": [
                "",
                [
                 "https://",
                 {
                  "Ref": "ApiF70053CD"
                 },
                 ".execute-api.us-east-2.",
                 {
                  "Ref": "AWS::URLSuffix"
                 },
                 "/",
                 {
                  "Ref": "ApiDeploymentStageprod3EB9684E"
                 },
                 "/"
                ]
               ]
              }
             ]
            }
           ]
          }
         ]
        ]
       }
      }
     ],
     "PriceClass": "PriceClass_100",
     "ViewerCertificate": {
      "AcmCertificateArn": {
       "Ref": "Certificate4E7ABB08"
      },
      "MinimumProtocolVersion": "TLSv1.2_2021",
      "SslSupportMethod": "sni-only"
     }
    }
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/Distribution/Resource"
   }
  },
  "EmailIdentity7187767D": {
   "Type": "AWS::SES::EmailIdentity",
   "Properties": {
    "EmailIdentity": "edgewoodshowchoirpayments.org"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/EmailIdentity/Resource"
   }
  },
  "ConfigurationSet3DD38186": {
   "Type": "AWS::SES::ConfigurationSet",
   "Properties": {
    "Name": "ehsshowchoir-emails"
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/ConfigurationSet/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/21T0W7bMAz8lr0r2pZuH5A6KzBgQ4N0ey4UifHYSGIgSi0ywf8+ybIXt+gT78gTSZ/ktVx/XstPH9QLr7Q5rSweZH6ISp9EST1mvpH5NukTRNEd/YRa2JFFfbmmJ97IrWIYhLl45ciUlr/UwULVjmAQmnqPkWT+zRB2RLbW/uMZbMkp9MvSlJlpZxF8XApaZhConMx7akPHeN23oUFY5Q5GyXyXvI5I46Al3kFwyFzYIPjmUTFDZLmpQVjqWf6gfg+xzKsH1Bl7FeFFXcpg4Lg54zh7gls4W7q4ad0FK27345YNFD2loKE6KH5C/EOmFic0V6fOE25mzhbwJhVtwL8QquzKiu0QIh5Rlz2d8mVckLm75qp8QYveUjLHQD7KfB+wR7/RGpi/m/rRcXSzq5q7qnlXsUWOAQ9pNnXJi63AMn8rd2qXLd8kyB+xT0HVIw/tJb7NDYPoEkdy7xv0qrQL9IwGwujweJvVefT9K3fvUzyn8pA8GZBP/PF5/UV+LX/KEyOuQiqrOZD7Fv8BraRHgUYDAAA="
   },
   "Metadata": {
    "aws:cdk:path": "EhsShowchoirStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ApiEndpoint4F160690": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ApiF70053CD"
      },
      ".execute-api.us-east-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ApiDeploymentStageprod3EB9684E"
      },
      "/"
     ]
    ]
   }
  },
  "WebsiteBucketName": {
   "Description": "S3 Bucket for website hosting",
   "Value": {
    "Ref": "WebsiteBucket75C24D94"
   },
   "Export": {
    "Name": "EhsShowchoir-WebsiteBucket"
   }
  },
  "InvoicesBucketName": {
   "Description": "S3 Bucket for invoice storage",
   "Value": {
    "Ref": "InvoicesBucket57FCB164"
   },
   "Export": {
    "Name": "EhsShowchoir-InvoicesBucket"
   }
  },
  "CloudFrontDomainName": {
   "Description": "CloudFront Distribution Domain Name",
   "Value": {
    "Fn::GetAtt": [
     "Distribution830FAC52",
     "DomainName"
    ]
   },
   "Export": {
    "Name": "EhsShowchoir-CloudFrontDomain"
   }
  },
  "CloudFrontDistributionId": {
   "Description": "CloudFront Distribution ID",
   "Value": {
    "Ref": "Distribution830FAC52"
   },
   "Export": {
    "Name": "EhsShowchoir-DistributionId"
   }
  },
  "ApiUrl": {
   "Description": "API Gateway URL",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ApiF70053CD"
      },
      ".execute-api.us-east-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ApiDeploymentStageprod3EB9684E"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "EhsShowchoir-ApiUrl"
   }
  },
  "UserPoolId": {
   "Description": "Cognito User Pool ID",
   "Value": {
    "Ref": "UserPool6BA7E5F2"
   },
   "Export": {
    "Name": "EhsShowchoir-UserPoolId"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "UserPoolClient2F5918F7"
   },
   "Export": {
    "Name": "EhsShowchoir-UserPoolClientId"
   }
  },
  "CognitoDomain": {
   "Description": "Cognito Hosted UI Domain",
   "Value": {
    "Ref": "UserPoolCognitoDomainD6C7F9FA"
   },
   "Export": {
    "Name": "EhsShowchoir-CognitoDomain"
   }
  },
  "CertificateArn": {
   "Description": "SSL Certificate ARN",
   "Value": {
    "Ref": "Certificate4E7ABB08"
   },
   "Export": {
    "Name": "EhsShowchoir-CertificateArn"
   }
  },
  "StudentsTableName": {
   "Description": "DynamoDB Students Table Name",
   "Value": {
    "Ref": "StudentsTableDAB56938"
   },
   "Export": {
    "Name": "EhsShowchoir-StudentsTable"
   }
  },
  "PaymentHistoryTableName": {
   "Description": "DynamoDB Payment History Table Name",
   "Value": {
    "Ref": "PaymentHistoryTableB1149501"
   },
   "Export": {
    "Name": "EhsShowchoir-PaymentHistoryTable"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}